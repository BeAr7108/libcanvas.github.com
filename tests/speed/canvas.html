<!doctype html>
<html>
	<head>
		<title></title>
	</head>
	<body style="padding: 0; margin: 0">
		<canvas width=400 height=100></canvas>
		<div></div>
		<script>
window.requestAnimFrame = (function(){
return  window.requestAnimationFrame       ||
		  window.webkitRequestAnimationFrame ||
		  window.mozRequestAnimationFrame    ||
		  window.oRequestAnimationFrame      ||
		  window.msRequestAnimationFrame     ||
		  function(/* function */ callback, /* DOMElement */ element){
			 window.setTimeout(callback, 1000 / 60);
		  };
})();

new function () {
	var div = document.querySelector('div');
	var ctx = document.querySelector('canvas').getContext('2d'), x = 10;
	var prv = Date.now();
	requestAnimFrame(function next () {
		ctx.clearRect( x, 10, 50, 50 );
		x = x>390 ? 10 : x+1;
		ctx.fillRect ( x, 10, 50, 50 );
		div.innerHTML = Date.now() - prv;
		prv = Date.now();
		requestAnimFrame(next);
	});
};
		</script>
	</body>
</html>