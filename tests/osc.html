<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>LibCanvas :: progress bar</title>
		<link href="/files/styles.css" rel="stylesheet" />
		<script src="/files/js/atom.js"></script>
		<script src="/files/js/libcanvas.js"></script>
	</head>
	<body>
		<canvas></canvas>
		<p><a href="/">Return to index</a></p>
		<script>
new function () {

	var data = makeData( 800, 500 ), currentFrame = 0;

	new LibCanvas( 'canvas', { fps: 40 })
		.fpsMeter()
		.size( 800, 300, true )
		.addFunc(function () { this.update() })
		.start(function () {
			console.log( 'ctx' );

			var
				context = this.ctx,
				i = 0,
				d = data[currentFrame],
				periodLength = d.length;

			context.beginPath(0.5, 150.5);
			for (;i < periodLength; i++) {
				context.lineTo(i + 0.5, d[i] + 50.5);
			}
			context.stroke( 'red' );
			
			if (++currentFrame === data.length) {
				this.stop();
			}
		});

	function makeData (periodLength, dataLength) {
		var j, i, period, data = new Array( dataLength );
		for (j = 0; j < dataLength; j++) {
			period = new Array(periodLength);
			for (i = 0; i < periodLength; i++) {
				period[i] = Number.random(0, 200);
			}
			data[j] = (period);
		}
		return data;
	}
};
		</script>
		<script src="/files/js/google-analytics.js"></script>
	</body>
</html>