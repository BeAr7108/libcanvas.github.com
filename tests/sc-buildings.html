<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>LibCanvas :: context «2d-libcanvas»</title>
		<link href="/files/styles.css" rel="stylesheet" />
		<script src="/files/js/atom.js"></script>
		<script src="/files/js/libcanvas.js"></script>
	</head>
	<body>
		<canvas width="800" height="500"></canvas>
		<p><a href="/">Return to index</a></p>
		<script>
new function () {
	LibCanvas.extract();
	
	var libcanvas = new LibCanvas('canvas');
	libcanvas.listenMouse().start();

	var copy;

	libcanvas.createShaper({
		shape: new Rectangle(700, 400, 80, 80).snapToPixel(),
		stroke : 'red'
	})
	.setZIndex(3)
	.listenMouse()
	.addEvent('click', function () {
		if (copy) return;

		copy = libcanvas.createShaper({
			shape: this.shape.clone(),
			fill: 'rgba(0, 255, 0, 0.1)'
		}).setZIndex(5);
	});

	var last = null;
	libcanvas.addFunc(function () {
		if (!copy || !libcanvas.mouse.inCanvas) return;
		var mouse = libcanvas.mouse.point.clone();
		if (last) copy.shape.move(last.diff(mouse));
		last = mouse;
		libcanvas.update();
	})
};
		</script>

	</body>
</html>