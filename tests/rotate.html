<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>LibCanvas :: Rotate Image</title>
		<link href="/files/styles.css" rel="stylesheet" />
		<script src="/files/js/atom.js"></script>
		<script src="/files/js/libcanvas.js"></script>
	</head>
	<body>
		<p><a href="/">Return to index</a></p>
		<script>
new function () {
	LibCanvas.extract();

	// class
	atom.declare( 'RotateImage', {
		parent: App.Element,

		prototype: {
			angle: 0,

			onUpdate: function (time) {
				this.angle += (30).degree() * time / 1000;
				this.redraw();
			},

			renderTo: function (ctx) {
				ctx.drawImage({
					image : this.settings.get('image'),
					angle : this.angle,
					center: this.shape.center
				});
			}
		}
	});

	// app initialize
	var img = new Image();
	img.src = '/files/img/html5-logo-small.png';
	img.onload = function () {
		var diam = Math.hypotenuse(img.width, img.height).ceil();
		var size = new Size(diam, diam);
		var helper = new App.Light(size, { invoke: true });

		new RotateImage(helper.scene, {
			image: img,
			shape: new Circle( size.x/2, size.y/2, diam / 2 )
		});
	};
};
		</script>
	</body>
</html>