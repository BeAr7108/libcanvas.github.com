<!DOCTYPE html>
<html>
		<head>
			<meta charset="utf-8" />
			<title>Сцена</title>
			<script src="/files/js/atom.js"></script>
			<script src="/files/js/libcanvas.js"></script>
			<style>
				.libcanvas-layers-container {
					border: 1px dashed green;
				}
			</style>
		</head>
		<body style="background: #333">
			<canvas width="800" height="400"></canvas>
			<script>
atom.dom(function (atom, $) {
	LibCanvas.extract();

	var COMPOSITE = {
		SOURCE_OVER: 'source-over',
		SOURCE_IN  : 'source-in',
		SOURCE_OUT : 'source-out',
		SOURCE_ATOP: 'source-atop',

		DESTINATION_OVER: 'destination-over',
		DESTINATION_IN  : 'destination-in',
		DESTINATION_OUT : 'destination-out',
		DESTINATION_ATOP: 'destination-atop',

		LIGHTER: 'lighter',
		DARKER : 'darker',
		COPY   : 'copy',
		XOR    : 'xor'
	};

	var ctx = $('canvas').first.getContext( '2d-libcanvas' );

	new ImagePreloader({
		html5: '/files/img/html5-logo.png'
	}).ready(function (preloader) {
		ctx.drawImage( preloader.images.html5 );

		var rectangle = new Rectangle({ from: [0,0], size: preloader.images.html5 });


		ctx.globalCompositeOperation = COMPOSITE.DARKER;
		ctx.fill( rectangle, ctx.createRectangleGradient( rectangle, {
			'0.0': 'red',
			'1.0': 'blue'
		}));
	});
});
			</script>
		</body>
</html>