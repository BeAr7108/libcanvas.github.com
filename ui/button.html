<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>LibCanvas :: Ui :: Draggable objects</title>
		<link href="/files/styles.css" rel="stylesheet" />
		<script src="/files/js/atom.js"></script>
		<script src="/files/js/libcanvas.js"></script>
	</head>
	<body>
		<canvas></canvas>
		<p><a href="/">Return to index</a></p>
		<script src="/files/js/ui-core.js"></script>
		<script>
new function () {

	LibCanvas.extract();
	
	var Button = atom.Class({
		Implements: [ Drawable, Clickable, Draggable ],

		initialize: function (shape) {
			this.setShape(shape);
		},

		get style () {
			return this.active ? {
					shadow  : { shadowBlur: 6, shadowColor: '#9f9' },
					gradient: { from: '#464', to  : '#242' },
					stroke  : '#8c8', text: '#cfc'
				} : this.hover ? {
					shadow  : { shadowBlur: 6, shadowColor: '#f99' },
					gradient: { from: '#644', to  : '#422' },
					stroke  : '#c88', text: '#fcc'
				} : {
					shadow  : { shadowBlur: 3, shadowColor: '#999' },
					gradient: { from: '#444', to  : '#222' },
					stroke  : '#888', text: '#ccc'
				}
		},

		draw: function () {
			var ctx = this.libcanvas.ctx, style = this.style;
			var gradient = ctx.createLinearGradient(this.shape.from, this.shape.bottomLeft);
			gradient.addColorStop(0.0, style.gradient.from);
			gradient.addColorStop(1.0, style.gradient.to  );

			ctx
			.save()
				.set(style.shadow)
				.fill(this.shape, 'rgba(0,0,0,0)')
			.restore()
			.save()
				.clip(this.shape)
				.fill(gradient)
			.restore()
			.save()
				.set({ lineWidth: 1, globalAlpha: 0.4 })
				.stroke(this.shape, style.stroke)
			.restore()
			.save()
				.set(style.shadow)
				.text({
					text: 'button',
					color  : style.text,
					to     : this.shape,
					align  : 'center',
					weight : 'bold',
					size   : 16,
					padding: [3,3]
				})
			.restore();
		}
	});

	var libcanvas = new LibCanvas('canvas')
		.listenMouse()
		.size({
			width : 400,
			height: 250
		}, true)
		.start();

	libcanvas.mouse.debug();
	
	var button = new Button( new RoundedRectangle(50, 50, 150, 30).setRadius(10) );
	libcanvas.addElement(button);
	button.listenMouse().clickable().draggable();

	button.addEvent(['statusChanged', 'moveDrag'], libcanvas.update);
}
		</script>
<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-23092701-1']);
_gaq.push(['_trackPageview']);

(function() {
	var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>
	</body>
</html>